<script>
    var comingFromPost = document.referrer;

    function linkToRandomBlogPost() {
        var allPosts = [
            {% for post in site.posts %}
                "{{ post.url }}"
            {% unless post.previous == nil %},{% endunless %}
        {% endfor %}
    ];

        var i = 0;

        do {
            var randomPostLink = allPosts[Math.floor(Math.random() * allPosts.length)]; i++;
        } while (comingFromPost.includes(randomPostLink) || i > 10)

        if (i > 10) {
            randomPostLink = 'http://localhost:4000/';
        }

        return randomPostLink;
    }

    location.replace(linkToRandomBlogPost())

</script>